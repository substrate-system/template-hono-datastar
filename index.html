<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Datastar Demo</title>
    <link rel="stylesheet" href="./src/client/style.css">
</head>

<body>
    <div id="root" data-signals="{
        count: 0,
        name: '',
        greeting: '',
        quote: '',
        timestamp: ''
    }">
        <header class="hero">
            <h1>Datastar Demo</h1>
            <p class="subtitle">Server-rendered HTML with reactive SSE updates</p>
        </header>

        <p>
            This page demonstrates using the server for all state. There is no
            client side JS at all here (except the datastar library).
        </p>

        <main class="cards">
            <section class="card">
                <h2>Live Server Time</h2>
                <p>Click to fetch the current server timestamp via SSE</p>
                <button class="btn" data-on:click="@post('/api/time')">
                    Get Server Time
                </button>
                <div
                    class="timestamp"
                    data-text="$timestamp || '-'"
                ></div>
            </section>

            <section class="card">
                <h2>Personalized Greeting</h2>
                <p>Enter your name and get a greeting from the server:</p>
                <form>
                    <input type="text" placeholder="Your name" data-bind:name>
                    <button
                        class="btn"
                        type="button"
                        data-on:click="@post('/api/greet')"
                    >
                        Say Hello
                    </button>
                </form>
                <div class="greeting" data-text="$greeting">
                </div>
            </section>

            <section class="card">
                <h2>Server-Synced Counter</h2>
                <p>
                    This counter syncs with the server on each click.
                    Each button click calls the server,
                    (<code>data-on:click="@post('/api/counter/decrement')"</code>)
                    and the server sends back a&nbsp;
                    <a href="https://developer.mozilla.org/en-US/docs/Web/API/Server-sent_events">
                        Server-Sent Event
                    </a> with the new count value.
                </p>
                <div class="counter-display" data-text="$count"></div>
                <div class="counter-buttons">
                    <button
                        class="btn"
                        data-on:click="@post('/api/counter/decrement')"
                    >&ndash;</button>
                    <button
                        class="btn"
                        data-on:click="@post('/api/counter/reset')"
                    >
                        Reset
                    </button>
                    <button
                        class="btn"
                        data-on:click="@post('/api/counter/increment')"
                    >
                        +
                    </button>
                </div>
            </section>

            <section class="card">
                <h2>Random Quote</h2>
                <p>Fetch a random quote from the server:</p>
                <button class="btn" data-on:click="@post('/api/quote')">
                    Get Quote
                </button>
                <div
                    class="quote-box"
                    data-show="$quote"
                    data-text="$quote"
                ></div>
            </section>
        </main>
    </div>

    <script
        type="module"
        src="https://cdn.jsdelivr.net/gh/starfederation/datastar@1.0.0-RC.7/bundles/datastar.js"
    ></script>
    <script type="module" src="./src/client/index.ts"></script>
</body>
</html>
